/cart:
  post:
    summary: create cart
    tags:
      - Seller Supporting Node (SSN)
    description: The <code>Buyer</code> selects items to add to a <code>Cart</code>
    requestBody:
      content:
        application/json:
          schema:
            $ref: './CartCreate.yaml'
    responses:
      '200':
        description: The new cart and terms
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '../schema/cart/Cart.yaml'
                terms: 
                  $ref: '../schema/shared/primitives/api/Terms.yaml'
      404:
        description: No data found for the provided value
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
      500:
        description: Unexpected error
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
/cart/{cart_id}:
  parameters:
    - name: cart_id
      description: A unique identifier for the cart. 
      in: path
      required: true
      schema:
        oneOf:
          - $ref: '../schema/cart/Cart.yaml#/properties/id' 
  get:
    summary: get a cart
    responses:
      '200':
        description: The new cart and terms
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '../schema/cart/Cart.yaml'
                terms: 
                  $ref: '../schema/shared/primitives/api/Terms.yaml'
      404:
        description: No data found for the provided value
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
      500:
        description: Unexpected error
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
  delete: 
    summary: delete a cart
    responses:
      '204':
        description: The cart was successfully deleted
      404:
        description: No cart was found for the provided cart_id
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
      500:
        description: Unexpected error
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
  put: 
    summary: update cart
    description: update fulfillment mode, note, or other property
    requestBody:
      description: Represents the action of a <code>Buyer</code> to update fulfillment specifications such as time, mode, and location.
      required: true
      content:
        application/json:
          schema:
            $ref: './CartUpdate.yaml'
    responses:
      '200':
        description: The new cart and terms
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '../schema/cart/Cart.yaml'
                terms: 
                  $ref: '../schema/shared/primitives/api/Terms.yaml'
      404:
        description: No data found for the provided value
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
      500:
        description: Unexpected error
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
/cart/{cart_id}/add_catalog_item:
  parameters:
    - name: cart_id
      description: A unique identifier for the cart. 
      in: path
      required: true
      schema:
        oneOf:
          - $ref: '../schema/cart/Cart.yaml#/properties/id'
  post: 
    summary: add item to cart
    description: Add a new item to an existing cart
    requestBody:
      description: New quantity value for the item.
      required: true
      content:
        application/json:
          schema:
            $ref: './CartAddCartCatalogItem.yaml'
    responses:
      '200':
        description: The new cart and terms
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '../schema/cart/Cart.yaml'
                terms: 
                  $ref: '../schema/shared/primitives/api/Terms.yaml'
      404:
        description: No data found for the provided value
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
      500:
        description: Unexpected error
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
/cart/{cart_id}/items/{item_id}:
  parameters:
    - name: cart_id
      description: A unique identifier for the cart. 
      in: path
      required: true
      schema:
        oneOf:
          - $ref: '../schema/cart/Cart.yaml#/properties/id'  
    - name: item_id
      description: A unique identifier for the item within the cart. 
      in: path
      required: true
      schema:
        oneOf:
          - $ref: '../schema/catalog/CatalogItem.yaml#/properties/id' 
  put: 
    summary: update item quantity
    description: Update the quantity of a specific item in a cart
    requestBody:
      description: New quantity value for the item.
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              quantity:
                type: integer
                description: The updated quantity value for the item
                format: int32
    responses:
      '200':
        description: The new cart and terms
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '../schema/cart/Cart.yaml'
                terms: 
                  $ref: '../schema/shared/primitives/api/Terms.yaml'
      404:
        description: No data found for the provided value
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
      500:
        description: Unexpected error
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
  delete: 
    summary: delete a cart item
    responses:
      '200':
        description: The new cart and terms
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '../schema/cart/Cart.yaml'
                terms: 
                  $ref: '../schema/shared/primitives/api/Terms.yaml'
      404:
        description: No cart was found for the provided cart_id
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
      500:
        description: Unexpected error
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
/cart/{cart_id}/items/{item_id}/modifiers/{modifier_id}:
  parameters:
    - name: cart_id
      description: A unique identifier for the cart. 
      in: path
      required: true
      schema:
        oneOf:
          - $ref: '../schema/cart/Cart.yaml#/properties/id'  
    - name: item_id
      description: A unique identifier for the item in the cart. 
      in: path
      required: true
      schema:
        oneOf:
          - $ref: '../schema/catalog/CatalogItem.yaml#/properties/id' 
    - name: modifier_id
      description: A unique identifier for the modifier of an item in the cart. 
      in: path
      required: true
      schema:
        oneOf:
          - $ref: '../schema/catalog/CatalogItem.yaml#/properties/id' 
  put: 
    summary: update modifier quantity
    description: Update the quantity of a specific item in a cart
    requestBody:
      description: New quantity value for the item.
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              quantity:
                type: integer
                description: The updated quantity value for the item
                format: int32
    responses:
      '200':
        description: The new cart and terms
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '../schema/cart/Cart.yaml'
                terms: 
                  $ref: '../schema/shared/primitives/api/Terms.yaml'
      404:
        description: No data found for the provided value
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
      500:
        description: Unexpected error
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
  delete: 
    summary: delete a modifier
    responses:
      '200':
        description: The new cart and terms
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '../schema/cart/Cart.yaml'
                terms: 
                  $ref: '../schema/shared/primitives/api/Terms.yaml'
      404:
        description: No cart was found for the provided cart_id
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
      500:
        description: Unexpected error
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
/payment_sheet:
  post:
    summary: initialize payment
    tags:
      - Seller Supporting Node (SSN)
    description: The <code>Buyer</code> initializes the payment flow
    requestBody:
      content:
        application/json:
          schema:
            $ref: './PaymentIntent.yaml'
    responses:
      '200':
        description: The new cart and terms
        content:
          application/json:
            schema:
              type: object
              properties: 
                payment_sheet_params:
                  $ref: './PaymentSheetParams.yaml'
                cart:
                  $ref: '../schema/cart/Cart.yaml' # included for ease of accessing merchant data in response body for payment sheet info on the client
      404:
        description: No data found for the provided value
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
      410:
        description: The provided terms are expired. Please call the /GET cart/:cart_id endpoint should be called to refresh the terms.
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'
      500:
        description: Unexpected error
        content:
          application/json:
            schema:
              $ref: '../schema/shared/primitives/api/Error.yaml'